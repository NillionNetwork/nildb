pre-commit:
  commands:
    oxfmt:
      glob: "*.{ts,json,jsonc}"
      # Uses pnpm directly (not justfile) because:
      # - Requires lefthook's {staged_files} variable for incremental formatting
      # - Uses stage_fixed to auto-stage formatted files (lefthook-specific)
      run: pnpm exec oxfmt {staged_files}
      stage_fixed: true

commit-msg:
  commands:
    lint-commit-msg:
      # Uses pnpm directly (not justfile) because:
      # - commitlint --edit reads from .git/COMMIT_EDITMSG (git hook context)
      # - Not a general-purpose task, only runs during git commit
      run: pnpm commitlint --edit

pre-push:
  commands:
    check:
      run: just check
    test:
      run: just test
